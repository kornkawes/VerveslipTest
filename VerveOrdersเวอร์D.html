<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verve Juice Order</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏≠‡∏ô‡∏ï‡πå Kanit ‡∏à‡∏≤‡∏Å Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&family=Inter:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f3e9;
        }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏°‡∏ô‡∏π */
        .cute-font {
            font-family: 'Kanit', sans-serif;
        }
        
        .container {
            max-width: 90%;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .card {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .cute-gradient {
            background-image: linear-gradient(to right, #a7f3d0, #fbcfe8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .btn-plus-minus {
            @apply w-8 h-8 flex items-center justify-center rounded-full text-white text-lg font-bold;
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-green-50 flex items-center justify-center min-h-screen p-4">

    <div class="container bg-white p-6 rounded-3xl shadow-xl w-full max-w-lg transition-all duration-300">

        <!-- Order Form Section -->
        <div id="order-form-section">
            <h1 class="text-3xl font-bold text-center mb-6 cute-gradient cute-font">Verve Juice</h1>

            <div class="mb-4">
                <label for="customerName" class="block text-gray-700 font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label>
                <input type="text" id="customerName" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" class="w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300">
            </div>

            <div class="mb-4">
                <label for="customerPhone" class="block text-gray-700 font-bold mb-2">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
                <input type="tel" id="customerPhone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå (10 ‡∏´‡∏•‡∏±‡∏Å)" class="w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300 mb-2">
                <div class="flex space-x-2">
                    <input type="text" id="contactApp" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏≠‡∏õ ‡πÄ‡∏ä‡πà‡∏ô Line" class="w-1/3 px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300">
                    <input type="text" id="contactId" placeholder="‡πÑ‡∏≠‡∏î‡∏µ ‡πÄ‡∏ä‡πà‡∏ô @vervejuice" class="w-2/3 px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300">
                </div>
            </div>

            <div class="mb-4">
                <label for="customerNote" class="block text-gray-700 font-bold mb-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                <textarea id="customerNote" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô" class="w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300 resize-none h-24"></textarea>
            </div>

            <h2 class="text-2xl font-bold mb-4 cute-gradient cute-font">‡πÄ‡∏°‡∏ô‡∏π</h2>
            <div id="menu-items" class="space-y-4">
                <!-- Menu items will be rendered here by JavaScript -->
            </div>

            <div class="mt-6 p-4 bg-pink-100 rounded-2xl flex justify-between items-center">
                <span class="text-lg font-bold text-gray-800">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°:</span>
                <span id="total-price" class="text-2xl font-extrabold text-pink-600">‡∏ø0</span>
            </div>

            <button id="confirm-order-btn" class="w-full mt-6 bg-pink-400 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:bg-pink-500 transition-colors">
                ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
            </button>
        </div>

        <!-- Payment Section -->
        <div id="payment-section" class="hidden">
            <h1 class="text-3xl font-bold text-center mb-6 cute-gradient cute-font">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h1>

            <!-- Back Button -->
            <button id="back-to-menu-btn" class="mb-4 px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-300 transition-colors">
                ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
            </button>
            
            <div id="order-summary" class="p-4 bg-gray-50 rounded-2xl mb-4">
                <h3 class="font-bold text-lg mb-2">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:</h3>
                <!-- Order summary will be rendered here -->
            </div>
            
            <div class="p-4 bg-lime-100 rounded-2xl text-center mb-6">
                <p class="text-xl font-bold text-lime-700">‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞</p>
                <p id="payment-total" class="text-4xl font-extrabold text-lime-600 my-2">‡∏ø0</p>
            </div>

            <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-2xl flex flex-col items-center">
                    <p class="font-bold mb-2">‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô QR Code</p>
                    
                    <!-- QR code display area, now using a fixed URL -->
                    <div id="qr-display-container" class="w-48 h-48 border border-gray-200 rounded-xl flex items-center justify-center bg-gray-100">
                        <img id="qrCodeImage" src="https://github.com/kornkawes/Image/blob/main/unnamed%20(1).jpg?raw=true" alt="QR Code" class="w-full h-full object-contain rounded-xl" onerror="this.onerror=null; this.src='https://placehold.co/400x400/eeeeee/333333?text=QR+Code'; showMessageBox('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å URL ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏î‡πâ', 'red');">
                    </div>
                    <p class="text-sm text-gray-500 mt-2">‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
                </div>

                <div class="bg-gray-50 p-4 rounded-2xl">
                    <p class="font-bold mb-1">‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</p>
                    <div class="bg-gray-100 p-3 rounded-xl flex items-center justify-between">
                        <div class="flex-1">
                            <p class="text-sm">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏ô‡∏≤‡∏¢ ‡∏Å‡∏£‡∏Å‡∏ß‡∏µ ‡∏™‡∏≤‡∏¢‡πÄ‡∏û‡∏ä‡∏£</p>
                            <p class="text-sm">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</p>
                            <p class="text-sm font-bold" id="bank-account-number">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: 014-1-08305-8</p>
                        </div>
                        <button id="copy-account-btn" class="ml-4 px-3 py-1 bg-gray-200 text-gray-700 text-sm font-bold rounded-lg hover:bg-gray-300 transition-colors">
                            ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å
                        </button>
                    </div>
                </div>
            </div>

            <div class="mt-6">
                <label for="slipUpload" class="block text-gray-700 font-bold mb-2">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô</label>
                <input type="file" id="slipUpload" class="w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-lime-300">
            </div>

            <!-- Slip Preview Section -->
            <div id="slip-preview-container" class="hidden mt-4 p-4 border rounded-xl bg-gray-50 flex flex-col items-center">
                <p class="text-sm text-gray-600 mb-2">‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</p>
                <img id="slip-preview" src="#" alt="Slip Preview" class="max-w-xs max-h-40 rounded-lg object-contain border border-gray-300" />
            </div>

            <button id="upload-slip-btn" class="w-full mt-6 bg-lime-400 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:bg-lime-500 transition-colors flex items-center justify-center">
                <span id="upload-slip-text">‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</span>
                <div id="upload-slip-spinner" class="spinner hidden ml-2"></div>
            </button>
        </div>

        <!-- Confirmation Section -->
        <div id="confirmation-section" class="hidden text-center">
            <svg class="mx-auto h-16 w-16 text-pink-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <h1 class="text-3xl font-bold text-center mt-4 text-pink-600 cute-font">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠!</h1>
            <p class="mt-2 text-gray-600">‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡∏£‡∏µ‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞</p>
            <button onclick="window.location.reload()" class="mt-6 bg-gray-400 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-gray-500 transition-colors">
                ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°
            </button>
        </div>

    </div>

    <script>
        // Global function to show a message box, moved to the global scope to be accessible by `onerror`
        window.showMessageBox = (message, color) => {
            const messageBox = document.createElement('div');
            messageBox.className = `fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-${color}-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 transition-all duration-300`;
            messageBox.textContent = message;
            document.body.appendChild(messageBox);
            setTimeout(() => { messageBox.remove(); }, 3000);
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            const menu = [
                { id: 'apple-kiss', name: 'Apple Kiss', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•, ‡∏Ç‡∏¥‡∏á, ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ú‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î, ‡∏•‡∏î‡∏à‡∏∏‡∏î‡∏î‡πà‡∏≤‡∏á‡∏î‡∏≥, ‡∏£‡∏≠‡∏¢‡∏™‡∏¥‡∏ß', imageUrl: 'https://placehold.co/80x80/f87171/111827?text=Apple%20Kiss' },
                { id: 'blush-bloom', name: 'Blush Bloom', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®, ‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î, ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏•‡∏±‡∏î‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏ú‡∏¥‡∏ß‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏£‡∏¥‡πâ‡∏ß‡∏£‡∏≠‡∏¢', imageUrl: 'https://placehold.co/80x80/fbcfe8/111827?text=Blush%20Bloom' },
                { id: 'happy-tummy', name: 'Happy Tummy', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•, ‡∏Å‡∏£‡∏∞‡∏ä‡∏≤‡∏¢, ‡∏Ç‡∏¥‡∏á, ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏≤‡∏£‡∏û‡∏¥‡∏©, ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å, ‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î, ‡∏à‡∏∏‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏î‡πÅ‡∏ô‡πà‡∏ô‡∏ó‡πâ‡∏≠‡∏á', imageUrl: 'https://placehold.co/80x80/bae6fd/111827?text=Happy%20Tummy' },
                { id: 'hearty-green', name: 'Hearty Green', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•, ‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î, ‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏•‡∏î‡∏Ñ‡∏≠‡πÄ‡∏•‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡∏≠‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏°‡∏∞‡πÄ‡∏£‡πá‡∏á', imageUrl: 'https://placehold.co/80x80/d9f991/111827?text=Hearty%20Green' },
                { id: 'sweet-detox', name: 'Sweet Detox', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•, ‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó, ‡∏ö‡∏µ‡∏ó‡∏£‡∏π‡∏ó', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏≤‡∏£‡∏û‡∏¥‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å, ‡∏ï‡πâ‡∏≤‡∏ô‡∏™‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏π‡∏•‡∏≠‡∏¥‡∏™‡∏£‡∏∞', imageUrl: 'https://placehold.co/80x80/fca5a5/111827?text=Sweet%20Detox' },
                { id: 'beet-love', name: 'Beet Love', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•, ‡∏ö‡∏µ‡∏ó‡∏£‡∏π‡∏ó, ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï', imageUrl: 'https://placehold.co/80x80/e781a7/111827?text=Beet%20Love' },
                { id: 'smart-sip', name: 'Smart Sip', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•, ‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤, ‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏°‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏™‡∏≤‡∏¢‡∏ï‡∏≤', imageUrl: 'https://placehold.co/80x80/6ee7b7/111827?text=Smart%20Sip' },
                { id: 'recharge-me', name: 'Recharge Me', price: 60, unit: '‡∏Ç‡∏ß‡∏î', ingredients: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•, ‡∏Ç‡∏¥‡∏á, ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', properties: '‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì: ‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ü‡∏∑‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏•‡πâ‡∏≤', imageUrl: 'https://placehold.co/80x80/fed7aa/111827?text=Recharge%20Me' }
            ];

            // ‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô webhook ‡∏Ç‡∏≠‡∏á n8n ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Sheet ‡πÅ‡∏•‡∏∞ Telegram ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ‚ö†Ô∏è
            const n8nWebhookUrlGoogleSheet = "https://kornkawes.app.n8n.cloud/webhook/3292a5c3-0f7f-424f-92f8-7dc42f51d763"; // YOUR_N8N_WEBHOOK_URL_FOR_GOOGLE_SHEET
            const n8nWebhookUrlTelegram = "https://kornkawes.app.n8n.cloud/webhook/3292a5c3-0f7f-424f-92f8-7dc42f51d763"; // YOUR_N8N_WEBHOOK_URL_FOR_TELEGRAM

            const menuItemsEl = document.getElementById('menu-items');
            const totalPriceEl = document.getElementById('total-price');
            const confirmOrderBtn = document.getElementById('confirm-order-btn');
            const orderFormSection = document.getElementById('order-form-section');
            const paymentSection = document.getElementById('payment-section');
            const confirmationSection = document.getElementById('confirmation-section');
            const paymentTotalEl = document.getElementById('payment-total');
            const orderSummaryEl = document.getElementById('order-summary');
            const slipUploadEl = document.getElementById('slipUpload');
            const customerNameEl = document.getElementById('customerName');
            const customerPhoneEl = document.getElementById('customerPhone');
            const contactAppEl = document.getElementById('contactApp');
            const contactIdEl = document.getElementById('contactId');
            const customerNoteEl = document.getElementById('customerNote');
            const copyAccountBtn = document.getElementById('copy-account-btn');
            const slipPreviewContainerEl = document.getElementById('slip-preview-container');
            const slipPreviewEl = document.getElementById('slip-preview');
            const uploadSlipBtn = document.getElementById('upload-slip-btn');
            const backToMenuBtn = document.getElementById('back-to-menu-btn');
            const uploadSlipTextEl = document.getElementById('upload-slip-text');
            const uploadSlipSpinnerEl = document.getElementById('upload-slip-spinner');
            
            const qrCodeImage = document.getElementById('qrCodeImage');

            let order = { items: {}, total: 0 };
            
            // Function to show a temporary message box
            const showMessageBox = (message, color) => {
                const messageBox = document.createElement('div');
                messageBox.className = `fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-${color}-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 transition-all duration-300`;
                messageBox.textContent = message;
                document.body.appendChild(messageBox);
                setTimeout(() => { messageBox.remove(); }, 3000);
            };
            
            window.toggleAllergyInput = (checkbox) => {
                const itemId = checkbox.dataset.id;
                const allergyInputDiv = document.getElementById(`allergy-input-${itemId}`);
                if (checkbox.checked) {
                    allergyInputDiv.classList.remove('hidden');
                } else {
                    allergyInputDiv.classList.add('hidden');
                    const input = allergyInputDiv.querySelector('input');
                    input.value = '';
                    if (order.items[itemId]) {
                        order.items[itemId].allergyNote = '';
                    }
                }
            };

            window.updateAllergyNote = (input) => {
                const itemId = input.dataset.id;
                if (order.items[itemId]) {
                    order.items[itemId].allergyNote = input.value;
                }
            };

            const updateTotal = () => {
                let total = 0;
                for (const itemId in order.items) {
                    if (order.items[itemId].quantity > 0) {
                        const item = menu.find(i => i.id === itemId);
                        total += (item ? item.price : 0) * order.items[itemId].quantity;
                    }
                }
                order.total = total;
                totalPriceEl.textContent = `‡∏ø${total}`;
            };
            
            const renderMenu = () => {
                menuItemsEl.innerHTML = '';
                menu.forEach(item => {
                    const quantity = order.items[item.id] ? order.items[item.id].quantity : 0;
                    const allergyNote = order.items[item.id] ? order.items[item.id].allergyNote : '';
                    const hasAllergy = allergyNote !== '';

                    const itemHtml = `
                        <div class="p-4 bg-gray-50 rounded-xl card flex items-center space-x-4">
                            <img src="${item.imageUrl}" alt="${item.name}" class="w-16 h-16 rounded-lg object-cover flex-shrink-0">
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex-1">
                                        <h3 class="font-bold text-gray-800">${item.name}</h3>
                                        <p class="text-sm text-gray-500">‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ø${item.price} ‡∏ï‡πà‡∏≠ ${item.unit}</p>
                                        <p class="text-xs text-gray-400 mt-1">‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°: ${item.ingredients}</p>
                                        <p class="text-xs text-gray-400 mt-1">${item.properties}</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button data-id="${item.id}" data-action="minus" class="btn-plus-minus bg-pink-400 hover:bg-pink-500 transition-colors rounded-full">-</button>
                                        <input type="number" data-id="${item.id}" class="w-12 text-center border-none bg-transparent font-bold focus:outline-none" value="${quantity}" min="0" readonly>
                                        <button data-id="${item.id}" data-action="plus" class="btn-plus-minus bg-lime-400 hover:bg-lime-500 transition-colors rounded-full">+</button>
                                    </div>
                                </div>

                                <div class="mt-2 text-sm text-gray-700">
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-lime-600 rounded" data-id="${item.id}" onchange="toggleAllergyInput(this)">
                                        <span>‡πÅ‡∏à‡πâ‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏û‡πâ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</span>
                                    </label>
                                    <div id="allergy-input-${item.id}" class="mt-2 ${hasAllergy ? '' : 'hidden'}">
                                        <input type="text" data-id="${item.id}" value="${allergyNote}" oninput="updateAllergyNote(this)" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏û‡πâ‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á" class="w-full px-3 py-2 border rounded-xl focus:outline-none focus:ring-1 focus:ring-lime-500">
                                        <p class="mt-1 text-xs text-red-500">
                                            ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏≠‡∏≤‡∏à‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏õ‡∏Å‡∏ï‡∏¥‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    menuItemsEl.insertAdjacentHTML('beforeend', itemHtml);
                });
            };

            menuItemsEl.addEventListener('click', (e) => {
                const button = e.target.closest('button');
                if (!button) return;

                const itemId = button.dataset.id;
                const action = button.dataset.action;
                
                if (!order.items[itemId]) {
                    order.items[itemId] = { ...menu.find(item => item.id === itemId), quantity: 0, allergyNote: '' };
                }

                if (action === 'plus') {
                    order.items[itemId].quantity++;
                } else if (action === 'minus' && order.items[itemId].quantity > 0) {
                    order.items[itemId].quantity--;
                }

                if (order.items[itemId].quantity === 0) {
                    delete order.items[itemId];
                }

                const inputEl = menuItemsEl.querySelector(`input[data-id="${itemId}"][type="number"]`);
                if (inputEl) {
                    inputEl.value = order.items[itemId] ? order.items[itemId].quantity : 0;
                }

                updateTotal();
            });

            confirmOrderBtn.addEventListener('click', async () => {
                const customerName = customerNameEl.value.trim();
                const customerPhone = customerPhoneEl.value.trim();
                const contactApp = contactAppEl.value.trim();
                const contactId = contactIdEl.value.trim();
                const customerNote = customerNoteEl.value.trim();

                const phoneRegex = /^\d{10}$/;
                if (!phoneRegex.test(customerPhone)) {
                    showMessageBox('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 10 ‡∏´‡∏•‡∏±‡∏Å)', 'red');
                    return;
                }

                if (Object.keys(order.items).length === 0) {
                    showMessageBox('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', 'red');
                    return;
                }

                if (!customerName) {
                    showMessageBox('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', 'red');
                    return;
                }

                const finalOrder = {
                    customerName: customerName,
                    customerContact: {
                        phone: customerPhone,
                        other: contactApp && contactId ? `${contactApp}: ${contactId}` : ''
                    },
                    customerNote: customerNote,
                    items: Object.values(order.items).filter(item => item.quantity > 0),
                    total: order.total
                };

                // ‚û°Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ n8n ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ, ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏ß‡πâ‡πÉ‡∏ô localStorage
                localStorage.setItem('currentOrder', JSON.stringify(finalOrder));
                
                renderPaymentPage(finalOrder);
                orderFormSection.classList.add('hidden');
                paymentSection.classList.remove('hidden');
            });

            backToMenuBtn.addEventListener('click', () => {
                paymentSection.classList.add('hidden');
                orderFormSection.classList.remove('hidden');
            });
            
            const renderPaymentPage = (finalOrder) => {
                let summaryHtml = `<p class="text-sm font-bold text-gray-700">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${finalOrder.customerName}</p>`;
                summaryHtml += `<p class="text-sm font-bold text-gray-700 mt-2">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${finalOrder.customerContact.phone}</p>`;
                if (finalOrder.customerContact.other) {
                    summaryHtml += `<p class="text-sm font-bold text-gray-700 mt-2">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô: ${finalOrder.customerContact.other}</p>`;
                }
                if (finalOrder.customerNote) {
                    summaryHtml += `<p class="text-sm font-bold text-gray-700 mt-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${finalOrder.customerNote}</p>`;
                }
                summaryHtml += `<div class="mt-4"><h4 class="font-bold">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:</h4></div>`;
                finalOrder.items.forEach(item => {
                    summaryHtml += `<p class="text-sm text-gray-600">${item.name} x ${item.quantity} ${item.unit} (‡∏ø${item.price * item.quantity})</p>`;
                    if (item.allergyNote) {
                        summaryHtml += `<p class="ml-4 text-xs text-red-500">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£: ${item.allergyNote}</p>`;
                    }
                });
                orderSummaryEl.innerHTML = summaryHtml;
                paymentTotalEl.textContent = `‡∏ø${finalOrder.total}`;
            };
            
            slipUploadEl.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        slipPreviewEl.src = e.target.result;
                        slipPreviewContainerEl.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                } else {
                    slipPreviewContainerEl.classList.add('hidden');
                    slipPreviewEl.src = '#';
                }
            });

            uploadSlipBtn.addEventListener('click', async () => {
                const slipFile = slipUploadEl.files[0];
                if (!slipFile) {
                    showMessageBox('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô', 'red');
                    return;
                }

                uploadSlipBtn.disabled = true;
                uploadSlipTextEl.classList.add('hidden');
                uploadSlipSpinnerEl.classList.remove('hidden');

                const currentOrder = JSON.parse(localStorage.getItem('currentOrder'));
                const orderTime = new Date().toISOString();

                // üí° ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢‡πÑ‡∏õ: ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏•‡∏¥‡∏õ
                //    ‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏õ‡∏¢‡∏±‡∏á Cloud Storage (‡∏≠‡∏¢‡πà‡∏≤‡∏á Google Cloud Storage ‡∏´‡∏£‡∏∑‡∏≠ Firebase Storage)
                //    ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ URL ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏°‡∏≤‡πÉ‡∏ä‡πâ
                //    ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ URL ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏•‡∏≠‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ n8n ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß
                //    ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏™‡∏•‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤
                //
                //    ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠ Cloud Storage ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:
                //    const paymentSlipUrl = await uploadFile(slipFile);
                const paymentSlipUrl = 'https://placehold.co/400x400/eeeeee/333333?text=Slip+Placeholder';

                // ‚úÖ ‡∏à‡∏±‡∏î‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Sheet
                const sheetPayload = {
                    customerName: currentOrder.customerName,
                    customerContact: currentOrder.customerContact.phone,
                    items: currentOrder.items.map(item => {
                        let itemString = `${item.name} x ${item.quantity}`;
                        if (item.allergyNote) {
                            itemString += ` (‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏û‡πâ: ${item.allergyNote})`;
                        }
                        return itemString;
                    }).join(', '),
                    orderTime: orderTime,
                    paymentTotal: currentOrder.total,
                    paymentSlipUrl: paymentSlipUrl
                };

                // ‚úÖ ‡∏à‡∏±‡∏î‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Telegram (‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢)
                let telegramMessage = `üçπ *Verve Juice ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà!* üçπ\n\n`;
                telegramMessage += `*‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:* ${currentOrder.customerName}\n`;
                telegramMessage += `*‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:* ${currentOrder.customerContact.phone}`;
                if (currentOrder.customerContact.other) {
                    telegramMessage += ` (${currentOrder.customerContact.other})`;
                }
                telegramMessage += `\n*‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á:*\n`;
                currentOrder.items.forEach(item => {
                    telegramMessage += `- ${item.name} x ${item.quantity} ${item.unit} (‡∏ø${item.price * item.quantity})\n`;
                    if (item.allergyNote) {
                        telegramMessage += `  (‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${item.allergyNote})\n`;
                    }
                });
                if (currentOrder.customerNote) {
                    telegramMessage += `\n*‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:* ${currentOrder.customerNote}\n`;
                }
                telegramMessage += `\n*‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:* ‡∏ø${currentOrder.total}\n`;
                telegramMessage += `\n*‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô:* ${paymentSlipUrl}`;

                // üöÄ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏ó‡∏µ‡πà n8n webhook ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß
                try {
                    // ‡∏™‡πà‡∏á‡πÑ‡∏õ Google Sheet
                    if (n8nWebhookUrlGoogleSheet) {
                        const responseSheet = await fetch(n8nWebhookUrlGoogleSheet, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(sheetPayload)
                        });
                        if (!responseSheet.ok) {
                            console.error(`Error sending data to n8n (Google Sheet): HTTP status ${responseSheet.status}`);
                        }
                    } else {
                        console.warn('n8nWebhookUrlGoogleSheet ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤. ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•.');
                    }
                    
                    // ‡∏™‡πà‡∏á‡πÑ‡∏õ Telegram
                    if (n8nWebhookUrlTelegram) {
                        const responseTelegram = await fetch(n8nWebhookUrlTelegram, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ text: telegramMessage })
                        });
                        if (!responseTelegram.ok) {
                            console.error(`Error sending data to n8n (Telegram): HTTP status ${responseTelegram.status}`);
                        }
                    } else {
                        console.warn('n8nWebhookUrlTelegram ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤. ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•.');
                    }
                } catch (error) {
                    console.error('Error sending data to n8n:', error);
                } finally {
                    uploadSlipBtn.disabled = false;
                    uploadSlipTextEl.classList.remove('hidden');
                    uploadSlipSpinnerEl.classList.add('hidden');
                }

                // ‚û°Ô∏è ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                paymentSection.classList.add('hidden');
                confirmationSection.classList.remove('hidden');
            });

            copyAccountBtn.addEventListener('click', () => {
                const accountNumberText = document.getElementById('bank-account-number').textContent.split(': ')[1];

                const tempInput = document.createElement('input');
                tempInput.value = accountNumberText;
                document.body.appendChild(tempInput);
                tempInput.select();
                try {
                    document.execCommand('copy');
                    showMessageBox('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß!', 'green');
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(tempInput);
            });

            renderMenu();
        });
    </script>
</body>
</html>



